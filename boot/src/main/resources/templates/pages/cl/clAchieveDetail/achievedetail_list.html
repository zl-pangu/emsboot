<@compress single_line=true>
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="renderer" content="webkit" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<#include "/pages/common/head.html">
		<title>业绩明细</title>
		<link rel="stylesheet" type="text/css" href="/ui/easyui-1.5.1/themes/insdep/easyui.css">
<style type="text/css">
.pagination-info {
    float: left;
    margin: 0 15px 0 0;
    padding: 0;
    height: 30px;
    line-height: 30px;
    }
</style>
</head>
<body>
	<div class="wrapper wrapper-content animated fadeInUp">
		<ol class="breadcrumb">
			您的位置：
			<li><a href="/index.html"><i class="layui-icon"
					style="font-weight: bold; font-size: 15px;">&#xe68e;</i>主页</a></li>
			<li class="active">[普惠]薪资管理</li>
			<li class="active"><i class="layui-icon"
				style="font-weight: bold; font-size: 15px;">&#xe715;</i> <font>业绩明细</font>
		</ol>
		<div class="ibox float-e-margins">
			<div class="ibox-content">
				<form id="searchForm" class="layui-form" lay-filter="form">
					<div class="container-fluid">
						<div class="row">
							<div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
								<div class="row">
									<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 zh-form-lable">
										<label>合同号：</label>
									</div>
									<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 zh-form-content">
										<input type="text" name="loanContractNo" id="queryLoanContractNo" class="form-control input-sm" maxlength="50" style="">
									</div>
								</div>
							</div>
							<div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
								<div class="row">
									<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 zh-form-lable">
										<label>客户姓名：</label>
									</div>
									<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 zh-form-content">
										<input type="text" name="loanName" id="queryLoanName" class="form-control input-sm" maxlength="50" style="" >
									</div>
								</div>
							</div>
							<div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">							
								<div class="row">								
									<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 zh-form-lable">
										<label>工资年月：</label>
									</div>
									<div class="layui-input-inline">
										<input type="text" name="gzymMin" id="queryGzymMin" class="layui-input" placeholder="yyyy-mm"   style="width: 120px;">
									</div>
									<div class="layui-input-inline">至</div>
									<div class="layui-input-inline">
										<input type="text" name="gzymMax" id="queryGzymMax" class="layui-input" placeholder="yyyy-mm"  style="width: 120px;">
									</div>																
								</div>
							</div>
							<div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
								<div class="row">
									<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 zh-form-lable">
										<label>业务经理编号：</label>
									</div>
									<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 zh-form-content">
										<input type="text" name="businessManagerNo" id="queryBusinessManagerNo" class="form-control input-sm" maxlength="50" style="" >
									</div>
								</div>
							</div>
							<div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
								<div class="row">
									<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 zh-form-lable">
										<label>团队经理编号：</label>
									</div>
									<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 zh-form-content">
										<input type="text" name="teamManagerNo" id="queryTeamManagerNo" class="form-control input-sm" maxlength="50" style="" >
									</div>
								</div>
							</div>
							<div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
								<div class="row">
									<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 zh-form-lable">
										<label>营业部经理编号：</label>
									</div>
									<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 zh-form-content">
										<input type="text" name="orgManagerNo" id="queryOrgManagerNo" class="form-control input-sm" maxlength="50" style="" >
									</div>
								</div>
							</div>
							<div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
								<div class="row">
									<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 zh-form-lable">
										<label>区域经理编号：</label>
									</div>
									<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 zh-form-content">
										<input type="text" name="areaManagerNo" id="queryAreaManagerNo" class="form-control input-sm" maxlength="50" style="" >
									</div>
								</div>
							</div>
							<div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
								<div class="row">
									<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 zh-form-lable">
										<label>组织部门：</label>
									</div>
									<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 zh-form-content">
										<input type="text" name="curDeptNo" id="queryCurDeptNo" class="form-control input-sm" maxlength="50" style="" >
									</div>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 zh-form-content">
							<@auth url='/cl/clAchieveDetail/batch_edit' var="batchUpdate">
								<button class="btn btn-primary btn-sm" type="button" title="批量修改" style="background-color: #21ba45" onclick="showBatchUpdateWin()" >
									<i class="layui-icon" style="font-size: 15px;">&#xe61f;</i>
									<font>批量修改</font>
								</button>
								</@auth>
								<@auth url='/cl/clAchieveDetail/snyc_data'>
								<button class="btn btn-primary btn-sm" type="button" title="从信贷系统同步当月业绩明细到系统" style="background-color: #21ba45" onclick="syncClAchieveDetail()" >
									<i class="layui-icon" style="font-size: 15px;">&#xe61f;</i>
									<font>同步业绩明细</font>
								</button>
								</@auth>
								<!-- <#if nowIsAllowToSync >
								<button class="btn btn-primary btn-sm" type="button" title="从信贷系统同步当月业绩明细到系统" style="background-color: #21ba45" disabled="disabled" >
									<i class="layui-icon" style="font-size: 15px;">&#xe61f;</i>
									<font>同步业绩明细</font>
								</button> 
								</#if>-->
								<@auth url='/cl/clAchieveDetail/export'>
								<button class="btn btn-primary btn-sm" type="button" title="导出业绩明细" style="background-color: #21ba45"  onclick="exportClAchieveDetail()">
									<i class="layui-icon" style="font-size: 15px;">&#xe61f;</i>
									<font>导出业绩明细</font>
								</button>
								</@auth>
								<button class="btn btn-primary btn-sm"  title="重置" style="background-color: #516d7b" onclick="reset()" type="button" >
									<i class="layui-icon" style="font-size: 15px;">&#x1002;</i>
									<font>重置</font>
								</button>	
								<button class="btn btn-primary btn-sm"  title="查询"  lay-submit lay-filter="queryBtn"  type="button"  onclick="query()">
									<i class="layui-icon" style="font-size: 15px;">&#xe615;</i>
									<font>查询</font>
								</button>
							</div>
						</div>
					</div>
				</form>
			</div>
			<div class="ibox-content">
				<table class="layui-hide" id="dataTable" lay-filter="tableFilter"></table>
			</div>			
		</div>
</div>	
<#include "/pages/common/foot.html" >	
<@auth url='/cl/clAchieveDetail/snyc_data'>
<script type="text/javascript">
	function checkAchieveDetail(callback) {
		$.ajax({
			url : '${ctx}/cl/clAchieveDetail/check',
			type : 'post',
			dataType : 'json',
			cache : false,
			beforeSend : function(xhr) {
				MaskUtil.mask("检查是否允许同步...");
			},
			success : function(res) {
				if (res.code == "200") {
					/* 不存在 */
					if (res.data && !res.data.isExist) {
						if (callback && callback instanceof Function)
							callback();
						else {
							console.error("参数错误");
						}
					} else {
						$.messager.alert("错误", "系统中已经存在当前工资年月的业绩明细数据，如需重新同步，请联系管理员。");
					}
				} else {
					var msg = res.msg ? res.msg : "系统错误！";
					$.messager.alert("错误", msg);
				}
			},
			error : function(xhr, errorType, errorInfo) {
				if (xhr.status = 200 && errorType == "parsererror") {
					var $doc = $(xhr.responseText);
					var msg = $doc.find(".red").eq(1).html();
					$.messager.alert("错误", msg);
				} else
					$.messager.alert("错误", res.status + ": " + res.statusText);
			},
			complete : function(xhr, ts) {
				MaskUtil.unmask();
			}
		});
	}

	function syncClAchieveDetail() {
		   layer.open({
                        type: 2,
                        title: "",
                        content: ['${ctx}/cl/clAchieveDetail/syncWin' , 'no'],
                        area: ['400px', '150px'],
                        btnAlign: 'c',
                        anim: 2,
                        btn: ['确定', '取消'],
                        yes: function (index, layero) {
                            var body = layer.getChildFrame('body', index);
                            var iframeWin = window[layero.find('iframe')[0]['name']];
                            function submitSyncClAchieveForm(xhr) {
                                $.ajax({
                                    url:'${ctx}/cl/clAchieveDetail/sync',
                                    data:{"data":JSON.stringify(xhr)},
                                    type:'post',
                                    async:false,
                                    success:function (data) {
                                        console.log(data);
                                        if(data.code==200){
                                            layer.msg(data.msg, {icon: 6});
                                            setTimeout(
                                                function() {
                                                    var url ="${ctx}/cl/clAchieveDetail/init.mvc";
                                                    window.location.href=url;
                                                }, 800);
                                        }else if(data.code==500){
                                            console.log(data);
                                            layer.msg("同步失败："+data.msg, {icon: 5});
                                        }else{
                                            console.log(data);
                                            layer.msg("同步失败："+data.msg, {icon: 5});
                                        }
                                    }
                                });
                            }
                            if (iframeWin.validateSync()) {
                                var form = layer.getChildFrame('form', index);
                                var obj = $.fn.serializeObject($(form));
                                submitSyncClAchieveForm(obj);
                                layer.close(index);
                            }
                        }, btn2: function (index, layero) {
                            layer.close(index);
                        }, cancel: function (index) {
                            layer.close(index);
                        }
              });
	}
</script>
</@auth>
<@auth url='/cl/clAchieveDetail/batch_edit'>
   <script type="text/javascript">
   	function showBatchUpdateWin() {
   		var $datagride = $('#dataTable');
   		var ckRows = $datagride.datagrid("getChecked");
   		var len = 0;
   		if (!ckRows || (len = ckRows.length) <= 0) {
   			$.messager.show({
   				title : "提示",
   				msg : "请先勾选要进行批量修改的行！",
   				showType : "slide",
   				width : 200,
   				height : 100,
   				timeout : 2000
   			});
   		} else {
   			var priNumbers = "";
   			for (var i = 0; i < len; i++) {
   				if (i != 0)
   					priNumbers += ",";
   				priNumbers += ckRows[i].priNumber;
   			}
   			var url = "${ctx}/cl/clAchieveDetail/batchUpdateWin?priNumbers=" + priNumbers;
 				var options = {
 					title : "批量修改 - [共" + len + "行]",
 					content : "<iframe src=\"" + url + "\" style=\"height:100%;width:100%;border:0px;\"></iframe>",
 					width : 600,
 					height : 410,
 					minimizable : false,
 					collapsible : false,
 					modal : true,
 					iconCls : "icon-edit"
 				};
 				$('#detailWin').window(options);
   		}
   	}
   </script>
 </@auth>
<@auth url='/cl/clAchieveDetail/export' >
  <script type="text/javascript">
		function exportClAchieveDetail() {
			var url = "${ctx}/cl/clAchieveDetail/export";
			url += "?";
			url += $('#searchForm').serialize();
			window.open(url);
			
			/* 添加日志记录 */
		    if(isLogExport){
		       try {
		   		$.ajax({
		   	         type : "post",
		   	         async : true, 
		   	         url : "${ctx}/exportLog/logInfo",
		   	         data : {salaryModuleName:"业绩明细-导出"},
		   	         dataType : "json", 
		   	         success : function(result) {
		   	        }
		   	     })
		       }catch (e) {}	
		    }
		}
</script>
 </@auth>
 <@auth url='/cl/clAchieveDetail/detail' var="initWinRole">
  <script type="text/javascript">
        var importClAchive;
		function showDetail(id, loanNo) {
			/* openWin("详细信息 - [合同号：" + loanNo + "]", "${ctx}/cl/clAchieveDetail/initWin?type=show&priNumber=" + id, "show"); */
		       
            importClAchive = layer.open({
                type: 2,
                title: ['<b>详细信息 - [合同号：' + loanNo + ']</b>', 'font-size:15px;text-align:center;'],
                content: ['${ctx}/cl/clAchieveDetail/initWin?type=show&priNumber=' + id, 'no'],
                area: ['900px', '650px'],
                btnAlign: 'c',
                anim: 2,
                btn: ['取消'],
                yes: function (index, layero) {
                    var body = layer.getChildFrame('body', index);
                    var iframeWin = window[layero.find('iframe')[0]['name']];
                    function submitCardForm(obj) {
                       
                    };
                },yes: function(index, layero){
                    layer.close(index);
                }, cancel: function (index) {
                    layer.close(index);
                }
            });
	}
	</script>
 </@auth>
 <@auth url='/cl/clAchieveDetail/edit' var="updateRole">
    <script type="text/javascript">
			function updateDetail(id, loanNo) {
				/* openWin("修改信息 - [合同号：" + loanNo + "]", "${ctx}/cl/clAchieveDetail/initWin?type=update&priNumber=" + id, "update"); */
			    
			    layer.open({
                        type: 2,
                        title:  ['<b>修改业绩明细 - [合同号：' + loanNo + ']</b>', 'font-size:15px;text-align:center;'],
                        content: ['${ctx}/cl/clAchieveDetail/initWin?type=update&priNumber=' + id, 'no'],
                        area: ['900px', '650px'],
                        btnAlign: 'c',
                        anim: 2,
                        btn: [],
                        yes: function (index, layero) {
                            var body = layer.getChildFrame('body', index);
                            var iframeWin = window[layero.find('iframe')[0]['name']];
                            function submitEditClAchieveForm() {
                                
                            }
                             
                        }, btn2: function (index, layero) {
                            layer.close(index);
                        }, cancel: function (index) {
                            layer.close(index);
                        }
              });
		}
 </script>
 </@auth>
 <@auth url='/cl/clAchieveDetail/delete' var="deleteRole">
  <script type="text/javascript">
		function deleteDetail(id, loanNo) {
			layer.open({
                        type: 2,
                        title:  ['<b>删除业绩明细 - [合同号：' + loanNo + ']</b>', 'font-size:15px;text-align:center;'],
                        content: ['${ctx}/cl/clAchieveDetail/deleteWin' , 'no'],
                        area: ['400px', '280px'],
                        btnAlign: 'c',
                        anim: 2,
                        btn: ['删除', '取消'],
                        yes: function (index, layero) {
                            var body = layer.getChildFrame('body', index);
                            var iframeWin = window[layero.find('iframe')[0]['name']];
                            function submitDelectClAchieveForm(obj) {
                                $.ajax({
                                    url:'${ctx}/cl/clAchieveDetail/delete?priNumber=' + id,
                                    data:{"data":JSON.stringify(obj)},
                                    type:'post',
                                    async:false,
                                    success:function (data) {
                                        console.log(data);
                                        if(data.code==200){
                                            layer.msg("删除成功", {icon: 6});
                                            setTimeout(
                                                function() {
                                                    var url ="${ctx}/cl/clAchieveDetail/init.mvc";
                                                    window.location.href=url;
                                                }, 800);
                                        }else if(data.code==500){
                                            layer.msg("删除失败："+data.msg, {icon: 5});
                                        }else{
                                            layer.msg("删除失败："+data.msg, {icon: 5});
                                        }
                                    }
                                });
                            }
                            if (iframeWin.validateDelect()) {
                                var form = layer.getChildFrame('form', index);
                                var obj = $.fn.serializeObject($(form));
                                submitDelectClAchieveForm(obj);
                                layer.close(index);
                            }
                        }, btn2: function (index, layero) {
                            layer.close(index);
                        }, cancel: function (index) {
                            layer.close(index);
                        }
              });
		}
	</script>
 </@auth>
<script type="text/javascript">
/*
	var comboboxs = ["areaNo", "orgNo", "deptNo", "teamNo"];
	var cbgs = [ "businessManagerNo", "teamManagerNo", "orgManagerNo", "areaManagerNo"];
	
	$(function() {
		for (var i = 0, len = comboboxs.length; i < len; i++) {
			$("#" + comboboxs[i]).combobox({
				filter : function(q, row) {
					var opts = $(this).combobox('options');
					var matcher = new RegExp(q.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&"), "i");
					return matcher.test(row[opts.textField]);
				}
			});
		}
		
		for (var i = 0, len = cbgs.length; i < len; i++) {
			eval("var onSelect=function(index,row){$('#" + cbgs[i] + "_name').text(row.EMP_NAME);};");通过eval提前定义function以解决闭包问题 
			eval("var onChange=function(newValue,oldValue){if(newValue==null || newValue=='')$('#" + cbgs[i] + "_name').text('');};");
			$("#" + cbgs[i]).combogrid({
				panelWidth : 210,
				panelHeight : 150,
				delay : 500,
				mode : 'remote',
				url : '${ctx}/salaryP2pEmpAction.do?method=querySalaryP2pEmpXz',
				idField : 'EMP_NO',
				textField : 'EMP_NO',
				method : 'post',
				columns : [ [ {field : 'EMP_NO',title : '员工编号',width : 100,sortable : true}, 
				              {field : 'EMP_NAME',title : '员工姓名',width : 100,sortable : true} ] ],
				onSelect : onSelect,
				onChange : onChange
			});
		}
	}); */
	layui.use(['table','layer','form','laydate'],function(){
		table=layui.table;
		form = layui.form;
		laydate = layui.laydate; 
		layer = layui.layer;
		
		laydate.render({elem:'#queryGzymMin',type:'month',format:'yyyy-MM'});
		laydate.render({elem:'#queryGzymMax',type:'month',format:'yyyy-MM'});
		form.render();
		/* table.render({
			elem: '#dataTable',
	        id: 'priNumber',
			url:'${ctx}/cl/clAchieveDetail/query',
	        loading:true,
	        method:'post',
			cols: [[
				{width:80,fixed:true,title:'序号',align:'center',checkbox:true},
				{field:'empNo',title: '员工编号',width:100,align:'center'},
				{field:'empName',title: '员工姓名',width:100,align:'center'},
				{field:'regionId',title: '大区',width:120,align:'center',templet:'#regionIdTpl'},
				{field:'filialeId',title: '分公司',width:120,align:'center',templet:'#orgIdTpl'},
				{field:'businessDeptId',title: '营业部',width:120,align:'center',templet:'#businessDeptIdTpl'},
				{field:'teamId',title: '团队',width:120,align:'center',templet:'#teamIdTpl'},
				{field:'leaveType',title: '请假类型',width:100,align:'center',templet:'#leaveTypeTpl'},
				{field:'leaveInterval',title: '请假时间',width:200,align:'center'},
				{field:'totalTime',title: '请假天数',width:80,align:'center'},
				{field:'leaveReason',title: '请假原因',width:150,align:'center'},
				{field:'status',title: '状态',width:80,align:'center',templet:'#statusTpl'},
				{fixed:'right',title: '操作',width:250,align:'center',toolbar:'#tableRowOperationTpl'}
			]],
	        height : '500',
	        skin : 'row',
	        size:'sm',
	        even : true,
	        page : true,
	        limits : [ 10, 30, 50 ],
	        limit : 10
		}); *//*end table.render */
		
		
	});/* end layui.use */
	
	$(function(){
		
	
	 $datagride = $('#dataTable').datagrid({
		url : '${ctx}/cl/clAchieveDetail/query',
		queryParams : {},/* gzym : '${gzym}' */
		striped : false,
		border : true,
		collapsible : false,/* 是否可折叠的  */
		singleSelect : true,
		checkOnSelect : false,
		selectOnCheck : false,
		fit : false,/*自动大小 */
		fitColumns : false,
		idField : 'priNumber',
		height : 505,
		border : true,
		showFooter : false,
		pagination : true,/*分页控件 */
		rownumbers : true,/*行号*/
		pageSize : 10,
		pagePosition : 'bottom',
		pageList : [ 10, 30, 50],
		loadFilter : function(res) {
			if (res.code == "200") {
				if (res.msg)
					$.messager.alert("成功", res.msg);
				if (res.data && res.data.grid)
					return res.data.grid;
				else
					return {total : 0,rows : []};
			} else {
				var msg = res.msg ? res.msg : "系统错误！";
				$.messager.alert("系统错误", msg);
				return {total : 0,rows : []};
			}
		},
		onBeforeLoad : function(p) {
			$(this).datagrid("clearChecked");
			$(this).datagrid("clearSelections");
			return true;
		},
		onLoadSuccess : function(data) {
			var compute = function($grid, colName) {
				var rows = $grid.datagrid('getRows');
				var total = 0;
				for (var i = 0; i < rows.length; i++) {
					total += parseFloat(rows[i][colName]);
				}
				return total;
			};
			$datagride.datagrid('getPager').pagination({
	            beforePageText: '第',
	            afterPageText:' 共{pages}页',
	            displayMsg: '  共{total}条记录'});
			/* $(this).datagrid('reloadFooter', [ {
				loanName : '<b>合计：</b>',
				loanAmount : compute($(this), "loanAmount"),
				grantLoanAmount : compute($(this), "grantLoanAmount")
			} ]); */
		},
		onLoadError : function(xhr, errorType, errorInfo) {
			if (xhr.status = 200 && errorType == "parsererror") {
				var $doc = $(xhr.responseText);
				var msg = $doc.find(".red").eq(1).html();
				$.messager.alert("错误", msg);
			} else
				$.messager.alert("失败", "数据加载失败！");
		},
		frozenColumns : [ [ {checkbox : true,field : '',rowspan : 2,hidden : "${batchUpdate}" != "true"}, {
			title : '<span style="font-weight: bold;">合同信息</span>',colspan : 6}, {
			field : 'priNumber',title : '<span style="font-weight: bold;">操作</span>',rowspan : 2,width : 80,halign : 'center',align : 'center',
			formatter : function(value, row, index) {
				if (value) {
					var a1 = "<a href='javascript:showDetail(" + value + ",\"" + row.loanContractNo + "\");'>详</a>";
					var a1_0 = "<span title='没有该操作权限'>详</span>";
					var a2 = "<a href='javascript:deleteDetail(" + value + ",\"" + row.loanContractNo + "\");'>删</a>";
					var a2_0 = "<span title='没有该操作权限'>删</span>";
					var a3 = "<a href='javascript:updateDetail(" + value + ",\"" + row.loanContractNo + "\");'>改</a>";
					var a3_0 = "<span title='没有该操作权限'>改</span>";
					
					var initWinRole = "${initWinRole}" == "true";
					var deleteRole = "${deleteRole}" == "true";
					var updateRole = "${updateRole}" == "true";
					var isCurGzym = "${gzym}" == row.gzym;
					
					var c = "";
					c += initWinRole ? a1 : a1_0;
					c += "&ensp;";
					c += deleteRole && isCurGzym ? a2 : a2_0;
					c += "&ensp;";
					c += (initWinRole && updateRole && isCurGzym) ? a3 : a3_0;
					return c;
				}
			},
			styler : function(value, row, index) {
				if (value)
					return 'background-color:#f6f6f6;color:#cecece;';
			}
		} ], [ {
			field : 'loanContractNo',title : '合同号',width : 150,halign : 'center'}, 
			{field : 'loanName',title : '客户姓名',width : 100,halign : 'center',align : 'center'}, 
			{field : 'loanAmount',title : '合同额',width : 60,halign : 'center',align : 'right'}, 
			{field : 'grantLoanAmount',title : '放款额',width : 60,halign : 'center',align : 'right'}, 
			{field : 'grantLoanDate',title : '约定放款日',width : 80,hidden : true,halign : 'center',align : 'center'}, 
			{field : 'payDate',title : '实际放款日',width : 80,halign : 'center',align : 'center'} ] ],
		columns : [ [ {
			title:'<spanstyle="font-weight:bold;">业务经理</span>',colspan:2},{
				title:'<spanstyle="font-weight:bold;">团队经理</span>',colspan:2},{
				title:'<spanstyle="font-weight:bold;">营业部经理</span>',colspan:2},{
				title:'<spanstyle="font-weight:bold;">区域经理</span>',colspan:2},{
				title:'<spanstyle="font-weight:bold;">外访专员</span>',colspan:2},{
				title:'<spanstyle="font-weight:bold;">信审专员</span>',colspan:2},{
				title:'<spanstyle="font-weight:bold;">客服专员</span>',colspan:2},{
				title:'<spanstyle="font-weight:bold;">区域</span>',colspan:2},{
				title:'<spanstyle="font-weight:bold;">分公司</span>',colspan:2},{
				title:'<spanstyle="font-weight:bold;">部门</span>',colspan:2},{
				title:'<spanstyle="font-weight:bold;">团队</span>',colspan:2},{
				field:'gzym',
				title:'<spanstyle="font-weight:bold;">工资年月</span>',
				width:80,
				rowspan:2,
				halign:'center',
				align:'center'
			}],[{
			field:'businessManagerNo',title:'编号',width:100,halign:'center'},{
			field:'businessManagerName',title:'姓名',width:80,halign:'center',align:'center'},{
			field:'teamManagerNo',title:'编号',width:100,halign:'center'},{
			field:'teamManagerName',title:'姓名',width:80,halign:'center',align:'center'},{
			field:'orgManagerNo',title:'编号',width:100,halign:'center'},{
			field:'orgManagerName',title:'姓名',width:80,halign:'center',align:'center'},{
			field:'areaManagerNo',title:'编号',width:100,halign:'center'},{
			field:'areaManagerName',title:'姓名',width:80,halign:'center',align:'center'},{
			field:'wfEmpNo',title:'编号',width:100,halign:'center'},{
			field:'wfEmpName',title:'姓名',width:80,halign:'center',align:'center'},{
			field:'xsEmpNo',title:'编号',width:100,halign:'center'},{
			field:'xsEmpName',title:'姓名',width:80,halign:'center',align:'center'},{
			field:'kfEmpNo',title:'编号',width:100,halign:'center'},{
			field:'kfEmpName',title:'姓名',width:80,halign:'center',align:'center'},{
			field:'areaNo',title:'编号',width:120,halign:'center',align:'center'},{
			field:'areaName',title:'名称',width:80,halign:'center',align:'center'},{
			field:'orgNo',title:'编号',width:50,halign:'center',align:'center'},{
			field:'orgName',title:'名称',width:80,halign:'center',align:'center'},{
			field:'deptNo',title:'编号',width:60,halign:'center',align:'center'},{
			field:'deptName',title:'名称',width:80,halign:'center',align:'center'},{
			field:'teamNo',title:'编号',width:60,halign:'center',align:'center'},{
			field:'teamName',title:'名称',width:80,halign:'center',align:'center'}]]
		});
	 
	$datagride.datagrid('getPager').pagination({
        layout:["list","sep","first","prev","sep","manual","sep","next","last","sep","sep"]
    });
	});
	function getFormObj(name) {
		return $("#searchForm").find("input[name='" + name + "']");
	}

	function reset() {
		$("#searchForm").reset();
		$("#loanContractNo").textbox("setValue", "");
		$("#loanName").textbox("setValue", "");
		$("#businessManagerNo").combogrid("setValue", "");
		$("#teamManagerNo").combogrid("setValue", "");
		$("#orgManagerNo").combogrid("setValue", "");
		$("#areaManagerNo").combogrid("setValue", "");
		$("#curDeptNo").combobox("setValue", "");
		$("#gzymMin").datebox("setValue", "${gzym}");
		$("#gzymMax").datebox("setValue", "${gzym}");
	}

	function query() {
		var params = $.fn.serializeObject($('#searchForm'));
		$('#dataTable').datagrid('load', params);
	}
</script>
</body>

</html>
</@compress>