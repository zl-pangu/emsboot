<@compress single_line=true>
<!DOCTYPE html>
<html>
<head>
 <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="renderer" content="webkit" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <#include "/pages/common/head.html" >
        <style>
            #mainForm .layui-inline{
                width : 320px;
                margin-left : 10px;
                display: inline;
            }
            #mainForm .layui-form-label{
                width : 20% !important;
                padding: 4px 15px;
            }
            #mainForm .layui-required-span{
                color: red;
                float: left;
                padding: 9px 0px;
            }
            #mainForm .layui-form-item{
                margin-bottom : 0px;
            }
            #mainForm .Non-Selectable{
               background-color: #F8F8F8;
                cursor: not-allowed!important;
            }
            #mainForm .layui-input:hover {
                border-color: #5bb730 !important;
            }
            .layui-layer-hui .layui-layer-content {
                padding: 7px 25px;
                margin-top: 1px;
                text-align: center;
                background-color: black;
            }
            .form .form-body {
                padding: 4%;
            }
            #AddAndEidt{
               padding-left:350px;
               padding-top:15px;
            }
        </style>
</head>
<link rel="stylesheet" type="text/css" href="/ui/easyui-1.5.1/themes/insdep/easyui.css">
<script type="text/javascript" src="${ctx}/ui/js/jquery.min.js"></script>
<script type="text/javascript" src="${ctx}/ui/js/plugins/layui/layui.js"></script>
<script type="text/javascript" src="${ctx}/ui/js/common.js"></script>
<script type="text/javascript" src="${ctx}/ui/js/jquery.validate-1.13.1.js"></script>
<script type="text/javascript" src="${ctx}/ui/js/plugins/layer/layer.js"></script>

<body>
	<div class="wrapper wrapper-content animated fadeInUp" style="padding: 0px" >
    <div class="container-fluid" style="padding: 0px;">
        <div class="ibox-content form">
            <div class="form-body" style="height: 650px">
                <div class="container-fluid">
                    <div class="row layui-form">
                        <form id="mainForm" method="post">
                            <input type="hidden"  name="priNumber" id="priNumber" value="${detail.priNumber!}">
                            <div class="layui-form-item">
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">合同编码</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="loanContractNo" id="loanContractNo" value="${detail.loanContractNo!}" readonly class="layui-input Non-Selectable" placeholder="请输入合同编码" >
                                    </div>
                                </div>
                                <div class="layui-inline">
                                    <label class="layui-form-label" style="width: auto;">客户姓名</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="loanName" id="loanName" value="${detail.loanName!}"  class="layui-input Non-Selectable" readonly >
                                    </div>
                                </div>
                            </div>
                           <div class="layui-form-item">
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">合同额</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="loanAmount" id="loanAmount" value="${detail.loanAmount!}" class="layui-input Non-Selectable" readonly>
                                    </div>
                                </div>
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">约定放款日</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="grantLoanDate" id="grantLoanDate" value="${detail.grantLoanDate!}"  class="layui-input Non-Selectable" readonly>
                                    </div>
                                </div>
                            </div>
                             <div class="layui-form-item">
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">放款额</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="grantLoanAmount" id="grantLoanAmount" value="${detail.grantLoanAmount!}" class="layui-input Non-Selectable" readonly>
                                    </div>
                                </div>
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">实际放款日</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="payDate" id="payDate" value="${detail.payDate!}" class="layui-input Non-Selectable" readonly>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">业务经理编号</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="businessManagerNo"  id="businessManagerNo"  value="${detail.businessManagerNo!}" class="layui-input chckNumclass"  >
                                    </div>
                                </div>
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">业务经理姓名</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="businessManagerName" id="businessManagerName" value="${detail.businessManagerName!}"  class="layui-input chckNumclass" readonly>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">团队经理编号</label>
                                    <div class="layui-input-inline">
                                        <input type="text"   name="teamManagerNo" id="teamManagerNo"  value="${detail.teamManagerNo!}" class="layui-input chckNumclass"  >
                                    </div>
                                </div>
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">团队经理姓名</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="teamManagerName" id="teamManagerName" value="${detail.teamManagerName!}"  class="layui-input chckNumclass" readonly>
                                    </div>
                                </div>
                            </div>
                             <div class="layui-form-item">
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">营业部经理编号</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="orgManagerNo" id="orgManagerNo"  value="${detail.orgManagerNo!}" class="layui-input chckNumclass"  >
                                    </div>
                                </div>
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">营业部经理姓名</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="orgManagerName" id="orgManagerName" value="${detail.orgManagerName!}"  class="layui-input chckNumclass" readonly>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">区域经理编号</label>
                                    <div class="layui-input-inline">
                                        <input type="text"   name="areaManagerNo"  id="areaManagerNo"  value="${detail.areaManagerNo!}" class="layui-input chckNumclass"  >
                                    </div>
                                </div>
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">区域经理姓名</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="areaManagerName" id="areaManagerName" value="${detail.areaManagerName!}"  class="layui-input chckNumclass" readonly>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">外访专员编号</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="wfEmpNo"  id="wfEmpNo"  value="${detail.wfEmpNo!}" class="layui-input chckNumclass"  readonly>
                                    </div>
                                </div>
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">外访专员姓名</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="wfEmpName" id="wfEmpName" value="${detail.wfEmpName!}"  class="layui-input chckNumclass" readonly>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">信审专员编号</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="xsEmpNo"  id="xsEmpNo"  value="${detail.xsEmpNo!}" class="layui-input chckNumclass" readonly >
                                    </div>
                                </div>
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">信审专员姓名</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="xsEmpName" id="xsEmpName" value="${detail.xsEmpName!}"  class="layui-input chckNumclass" readonly>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">客服专员编号</label>
                                    <div class="layui-input-inline">
                                        <input type="text"   name="kfEmpNo" id="kfEmpNo"  value="${detail.kfEmpNo!}" class="layui-input chckNumclass"  readonly>
                                    </div>
                                </div>
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">客服专员姓名</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="kfEmpName" id="kfEmpName" value="${detail.kfEmpName!}"  class="layui-input chckNumclass" readonly>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                            <div class="layui-inline ">
                                <label class="layui-form-label" style="width: auto;">区域</label>
                                <div class="layui-input-inline">
                                    <input type="hidden"  name="areaName" id="areaName" value="${detail.areaName!}">
                                    <input type="text"  name="areaNo" id="areaNo"  value="${detail.areaName!}"   class="layui-input chckNumclass"  >
                                </div>
                            </div>
                            <div class="layui-inline ">
                                <label class="layui-form-label" style="width: auto;">分公司</label>
                                <div class="layui-input-inline">
                                   <input type="hidden"  name="orgName" id="orgName" value="${detail.orgName!}">
                                    <input type="text"  name="orgNo" id="orgNo"  value="${detail.orgName!}" class="layui-input chckNumclass"  >
                                </div>
                            </div>
                        </div>
                            <div class="layui-form-item">
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">部门</label>
                                    <div class="layui-input-inline">
                                        <input type="hidden"  name="deptName" id="deptName" value="${detail.deptName!}">
                                        <input type="text"   name="deptNo"  id="deptNo" value="${detail.deptName!}" class="layui-input chckNumclass"  >
                                    </div>
                                </div>
                                <div class="layui-inline ">
                                  <label class="layui-form-label" style="width: auto;">团队</label>
                                  <div class="layui-input-inline">
                                    <input type="hidden"  name="teamName" id="teamName" value="${detail.teamName!}">
                                    <input type="text"  name="teamNo" id="teamNo"  value="${detail.teamName!}" class="layui-input chckNumclass"  >
                                  </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">工资年月</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  readonly name="gzym"  id="gzym" value="${detail.gzym!}" class="layui-input Non-Selectable"  >
                                    </div>
                                </div>
                                <div class="layui-inline ">
                                  <label class="layui-form-label" style="width: auto;"></label>
                                  <div class="layui-input-inline">
                                   
                                  </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">创建时间</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  readonly name="createTime"  id="createTime" value="${(detail.createTime?string('yyyy-MM-dd'))!}" class="layui-input Non-Selectable" readonly >
                                    </div>
                                </div>
                                <div class="layui-inline ">
                                  <label class="layui-form-label" style="width: auto;">创建者</label>
                                      
                                  <div class="layui-input-inline">
                                     <input type="text"  name="creatorNo" id="creatorNo"  value="${detail.creatorNo!}" class="layui-input Non-Selectable"  readonly>
                                  </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">修改时间</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  readonly name="updateTime"  id="updateTime" value="${(detail.updateTime?string('yyyy-MM-dd'))!}" class="layui-input Non-Selectable"  >
                                    </div>
                                </div>
                                <div class="layui-inline ">
                                  <label class="layui-form-label" style="width: auto;">修改者</label>
                                  <div class="layui-input-inline">
                                    <input type="text"  name="modifierName" id="modifierName"  value="${detail.modifierNo!}" class="layui-input Non-Selectable"  readonly>
                                  </div>
                                </div>
                            </div>         
                            
                            <div class="layui-form-item" id="AddAndEidt">
									   <div class="layui-inline ">
										<button lay-submit lay-filter="auditSubmit"
											class="btn btn-primary btn-sm" 
											onclick="submitForm()"
											type="button">
											<font>提交</font>
										</button> 
									    </div>
										<div class="layui-inline ">
										<button class="btn btn-primary btn-sm"
											style="background-color: #FF5722" type="button" onclick="resetAchieve()">
										     <font>重置</font>
										</button>
										</div> 
										<div class="layui-inline ">
										 <!-- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -->
										<button id="cancel" class="btn btn-primary btn-sm"
											style="background-color: #FF5722" type="button">
											<font>取消</font>
										</button>
								     </div>
							</div>                    
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
	
</body>

<script type="text/javascript" src="/ui/easyui-1.5.1/jquery.easyui-1.5.1.min.js"></script>
<link rel="stylesheet" href="${ctx}/ui/css/plugins/zTree_v3/metroStyle/metroStyle.css" type="text/css">
<script type="text/javascript" src="/ui/easyui-1.5.1/jquery.easyui-1.5.1.min.js"></script>
<script type="text/javascript" src="/ui/easyui-1.5.1/jquery.easyui-1.5.1.min.js"></script>
<script type="text/javascript" src="${ctx}/ui/js/plugins/iCheck/icheck.min.js"></script>
<script type="text/javascript" src="${ctx}/ui/js/plugins/zTree_v3/jquery.ztree.core-3.5.js"></script>
<script type="text/javascript" src="${ctx}/ui/js/plugins/zTree_v3/jquery.ztree.excheck-3.5.js"></script>
<script type="text/javascript" src="${ctx}/ui/js/plugins/zTree_v3/jquery.ztree.exedit-3.5.js"></script>

<script type="text/javascript">
	function validateClachieve() {
        var flag=true;
            /* var businessManagerNo = $("#businessManagerNo").val();
            var businessManagerName = $("businessManagerName").val();
            
            
            if(businessManagerNo==''){
                validateAddTips('业务经理编码','，不能为空！');
                flag=false;
            }
            if(businessManagerName==''){
                validateAddTips('业务经理姓名','，不能为空！');
                flag=false;
            } */
        return flag;
    }
    
    function validateAddTips(filedName,msg){
        layer.msg("<font style='color: paleturquoise'>"+filedName+"</font>"+msg+"",{
            anim:6,
        });
    }
	
	var BusinessManagerNo;
	$("#businessManagerNo").combogrid({
            loadMsg: 'Loading···',
            panelWidth: 250,
            panelHeight:300,
            delay: 500,
            mode: 'remote',
            url: '${ctx}/cl/clAchieveDetail/querySalaryEmp',
            idField: 'EMP_NO',
            textField: 'EMP_NO',
            method: 'post',
            striped : true,
            rownumbers : true,
            pagination : true,
            pageList : [10,50,100],
            columns: [[
                {field: 'EMP_NO', title: '员工编码', width: 100, sortable: true},
                {field: 'EMP_NAME', title: '员工姓名', width: 100, sortable: true}
            ]],
            onSelect: function (rowIndex, row) {
                 $("#businessManagerNo").val(row['EMP_NO']);
            	 $("#businessManagerName").val(row['EMP_NAME']);
            	 BusinessManagerNo = $("#_easyui_textbox_input1").next().val();
            	 collbackBusinessManagerNO(BusinessManagerNo);
            },
        });
        
    var TeamManagerNo;
	$("#teamManagerNo").combogrid({
            loadMsg: 'Loading···',
            panelWidth: 250,
            panelHeight:300,
            delay: 500,
            mode: 'remote',
            url: '${ctx}/cl/clAchieveDetail/queryTeamManagerEmp',
            idField: 'EMP_NO',
            textField: 'EMP_NO',
            method: 'post',
            striped : true,
            rownumbers : true,
            pagination : true,
            pageList : [10,50,100],
            columns: [[
                {field: 'EMP_NO', title: '员工编码', width: 100, sortable: true},
                {field: 'EMP_NAME', title: '员工姓名', width: 100, sortable: true}
            ]],
            onSelect: function (rowIndex, row) {
                 $("#teamManagerNo").val(row['EMP_NO']);
            	 $("#teamManagerName").val(row['EMP_NAME']);
            	 TeamManagerNo = $("#_easyui_textbox_input2").next().val();
            	 collbackTeamManagerNO(TeamManagerNo);
            },
        });
       
    var OrgManagerNo;
	$("#orgManagerNo").combogrid({
            loadMsg: 'Loading···',
            panelWidth: 250,
            panelHeight:300,
            delay: 500,
            mode: 'remote',
            url: '${ctx}/cl/clAchieveDetail/queryOrgManagerEmp',
            idField: 'EMP_NO',
            textField: 'EMP_NO',
            method: 'post',
            striped : true,
            rownumbers : true,
            pagination : true,
            pageList : [10,50,100],
            columns: [[
                {field: 'EMP_NO', title: '员工编码', width: 100, sortable: true},
                {field: 'EMP_NAME', title: '员工姓名', width: 100, sortable: true}
            ]],
            onSelect: function (rowIndex, row) {
                 $("#orgManagerNo").val(row['EMP_NO']);
            	 $("#orgManagerName").val(row['EMP_NAME']);
            	 OrgManagerNo = $("#_easyui_textbox_input3").next().val();
            	 collbackOrgManagerNo(OrgManagerNo);
            },
        }); 
       
    var AreaManagerNo;
	$("#areaManagerNo").combogrid({
            loadMsg: 'Loading···',
            panelWidth: 250,
            panelHeight:300,
            delay: 500,
            mode: 'remote',
            url: '${ctx}/cl/clAchieveDetail/queryAreaManagerEmp',
            idField: 'EMP_NO',
            textField: 'EMP_NO',
            method: 'post',
            striped : true,
            rownumbers : true,
            pagination : true,
            pageList : [10,50,100],
            columns: [[
                {field: 'EMP_NO', title: '员工编码', width: 100, sortable: true},
                {field: 'EMP_NAME', title: '员工姓名', width: 100, sortable: true}
            ]],
            onSelect: function (rowIndex, row) {
                 $("#areaManagerNo").val(row['EMP_NO']);
            	 $("#areaManagerName").val(row['EMP_NAME']);
            	 AreaManagerNo = $("#_easyui_textbox_input4").next().val();
            	 collbackAreaManagerNo(AreaManagerNo);
            },
        });   
       
        var AreaNo;
        $("#areaNo").combogrid({
            loadMsg: 'Loading···',
            panelWidth: 250,
            panelHeight:200,
            delay: 500,
            mode: 'remote',
            url: '${ctx}/cl/clAchieveDetail/queryArea',
            idField: 'DEPT_CODE',
            textField: 'DEPT_NAME',
            method: 'get',
            striped : true,
            rownumbers : true,
            pagination : true,
            pageList : [10,50,100],
            columns: [[
                {field: 'DEPT_CODE', title: '区域编码', width: 100, sortable: true},
                {field: 'DEPT_NAME', title: '区域名称', width: 100, sortable: true}
            ]],
            onSelect: function (rowIndex, row) {
                 $("#areaNo").val(row['DEPT_CODE']);
            	 $("#areaName").val(row['DEPT_NAME']);
            	 AreaNo =$("#_easyui_textbox_input5").next().val();
            	 $('#orgNo').combogrid('grid').datagrid('reload',{'q':AreaNo});
            	 
            	 $("#orgNo").combogrid('setValue', '请选择分公司');
				 $("#deptNo").combogrid('setValue', '请选择部门');
				 $("#teamNo").combogrid('setValue', '请选择团队');
            },
        });
        
        var OrgNo;
        $("#orgNo").combogrid({
            loadMsg: 'Loading···',
            panelWidth: 250,
            panelHeight:200,
            delay: 500,
            mode: 'remote',
            url: '${ctx}/cl/clAchieveDetail/queryOrg?deptCode =' + AreaNo,
            idField: 'DEPT_CODE',
            textField: 'DEPT_NAME',
            method: 'get',
            striped : true,
            rownumbers : true,
            pagination : true,
            pageList : [10,50,100],
            columns: [[
                {field: 'DEPT_CODE', title: '营业部编码', width: 100, sortable: true},
                {field: 'DEPT_NAME', title: '营业部名称', width: 100, sortable: true}
            ]],
            onSelect: function (rowIndex, row) {
                 $("#orgNo").val(row['DEPT_CODE']);
            	 $("#orgName").val(row['DEPT_NAME']);
            	 OrgNo =$("#_easyui_textbox_input6").next().val();
            	 $('#deptNo').combogrid('grid').datagrid('reload',{'q':OrgNo});
            }
        });
      
        var DeptNo;
         $("#deptNo").combogrid({
            loadMsg: 'Loading···',
            panelWidth: 250,
            panelHeight:200,
            delay: 500,
            mode: 'remote',
            url: '${ctx}/cl/clAchieveDetail/queryDept',
            idField: 'DEPT_CODE',
            textField: 'DEPT_NAME',
            method: 'post',
            striped : true,
            rownumbers : true,
            pagination : true,
            pageList : [10,50,100],
            columns: [[
                {field: 'DEPT_CODE', title: '部门编码', width: 100, sortable: true},
                {field: 'DEPT_NAME', title: '部门名称', width: 100, sortable: true}
            ]],
            onSelect: function (rowIndex, row) {
                 $("#deptNo").val(row['DEPT_CODE']);
            	 $("#deptName").val(row['DEPT_NAME']);
            	 DeptNo =$("#_easyui_textbox_input7").next().val();
            	 $('#teamNo').combogrid('grid').datagrid('reload',{'q':DeptNo});
            }
        });
        
         
         $("#teamNo").combogrid({
            loadMsg: 'Loading···',
            panelWidth: 250,
            panelHeight:200,
            delay: 500,
            mode: 'remote',
            url: '${ctx}/cl/clAchieveDetail/queryTeam',
            idField: 'DEPT_CODE',
            textField: 'DEPT_NAME',
            method: 'post',
            striped : true,
            rownumbers : true,
            pagination : true,
            pageList : [10,50,100],
            columns: [[
                {field: 'DEPT_CODE', title: '团队编码', width: 100, sortable: true},
                {field: 'DEPT_NAME', title: '团队名称', width: 100, sortable: true}
            ]],
            onSelect: function (rowIndex, row) {
                 $("#teamNo").val(row['DEPT_CODE']);
            	 $("#teamName").val(row['DEPT_NAME']);
            }
        });
        
	
    (function($){
    $.fn.serializeJson=function(){
        var serializeObj={};
        var array=this.serializeArray();
        var str=this.serialize();
        $(array).each(function(){
            if(serializeObj[this.name]){
                if($.isArray(serializeObj[this.name])){
                    serializeObj[this.name].push(this.value);
                }else{
                    serializeObj[this.name]=[serializeObj[this.name],this.value];
                }
            }else{
                serializeObj[this.name]=this.value;
            }
        });
        return serializeObj;
    };
    })(jQuery);
    
    var dataForm;
    function collbackBusinessManagerNO(BusinessManagerNo){
         $("#businessManagerNo").attr("value",BusinessManagerNo);
         $('#mainForm').attr("businessManagerNo","BusinessManagerNo");
    } 
    function  collbackTeamManagerNO(TeamManagerNo){
         $("#teamManagerNo").attr("value",TeamManagerNo);
         $('#mainForm').attr("teamManagerNo","TeamManagerNo");
    }
     function  collbackOrgManagerNo(OrgManagerNo){
         $("#orgManagerNo").attr("value",OrgManagerNo);
         $('#mainForm').attr("orgManagerNo","OrgManagerNo");
    }
    function  collbackAreaManagerNo(AreaManagerNo){
         $("#areaManagerNo").attr("value",AreaManagerNo);
         $('#mainForm').attr("areaManagerNo","AreaManagerNo");
    }
    
   
    
    function submitForm() {
               dataForm = $('#mainForm').serializeJson();
               $.ajax({
                    url:'${ctx}/cl/clAchieveDetail/update',
                              data: {"data":JSON.stringify(dataForm)},
                              type:'post',
                              async:false,
                    success:function (data) {
                              console.log(data); 
                           if(data.code==200){
                             layer.msg("修改成功", {icon: 6});
                      setTimeout(
                             function() {
                    /*获取父页面,关闭父页面*/
                    var index1 = parent.layer.getFrameIndex(window.name);  
                    parent.layer.close(index1); 
                     
                    var url ="${ctx}/cl/clAchieveDetail/init.mvc";
                    window.location.href=url;
                    }, 800);
                }else if(data.code==500){
                     layer.msg("修改失败："+data.msg, {icon: 5});
                }else{
                     layer.msg("修改失败："+data.msg, {icon: 5});
                }
            }
        });
    } 
    
    function resetAchieve(){
                $("#areaManagerNo").combogrid('setValue', '${detail.areaManagerNo}');
                $("#orgManagerNo").combogrid('setValue', '${detail.orgManagerNo}'); 
                $("#teamManagerNo").combogrid('setValue', '${detail.teamManagerNo}'); 
                $("#businessManagerNo").combogrid('setValue', '${detail.businessManagerNo}');
                 
				$("#areaNo").combogrid('setValue', '${detail.areaName}');
				$("#orgNo").combogrid('setValue', '${detail.orgName}');
				$("#deptNo").combogrid('setValue', '${detail.deptName}');
				$("#teamNo").combogrid('setValue', '${detail.teamName}');
    }
    
    $(document).ready(function () {
        /*cancel*/
        $("#cancel").click(function () {
        	var url ="${ctx}/cl/clAchieveDetail/init.mvc";
            window.location.href=url;
            /*获取父页面*/
            var index = parent.layer.getFrameIndex(window.name);  
            parent.layer.close(index);  
        })
     })

</script>
</html>
</@compress>