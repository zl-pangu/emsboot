<@compress single_line=true>
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="renderer" content="webkit" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <#include "/pages/common/head.html" >
        <style>
            #addshowForm .layui-inline{
                width : 320px;
                margin-left : 10px;
                display: inline;
            }
            #addshowForm .layui-form-label{
                width : 20% !important;
                padding: 4px 15px;
            }
            #addshowForm .layui-required-span{
                color: red;
                float: left;
                padding: 9px 0px;
            }
            #addshowForm .layui-form-item{
                margin-bottom : 0px;
            }
            #addshowForm .Non-Selectable{
               background-color: #F8F8F8;
                cursor: not-allowed!important;
            }
            #addshowForm .layui-input:hover {
                border-color: #5bb730 !important;
            }
            .layui-layer-hui .layui-layer-content {
                padding: 7px 25px;
                margin-top: 1px;
                text-align: center;
                background-color: black;
            }
            .form .form-body {
                padding: 4%;
            }
        </style>
        </head>
<body>
<div class="wrapper wrapper-content animated fadeInUp" style="padding: 0px" >
    <div class="container-fluid" style="padding: 0px;">
        <div class="ibox-content form">
            <div class="form-body" style="height: 360px">
                <div class="container-fluid">
                    <div class="row layui-form">
                        <form id="addshowForm">
                            <input type="hidden"  name="id" id="id" value="${card.id}">
                            <div class="layui-form-item">
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">员工编码</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="empNo" id="empNo" value="${card.empNo!}" readonly class="layui-input Non-Selectable" placeholder="请输入员工编码" >
                                    </div>
                                    <span class="layui-required-span">*</span>
                                </div>
                                <div class="layui-inline">
                                    <label class="layui-form-label" style="width: auto;">员工姓名</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="empName" id="empName" value="${card.empName!}"  class="layui-input Non-Selectable" readonly >
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">大区</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="region" id="region" value="${card.region!}" class="layui-input Non-Selectable" readonly>
                                    </div>
                                </div>
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">分公司</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="filiale" id="filiale" value="${card.filiale!}"  class="layui-input Non-Selectable" readonly>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">营业部</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="dept" id="dept" value="${card.dept!}" class="layui-input Non-Selectable" readonly>
                                    </div>
                                </div>
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">团队</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="team" id="team" value="${card.team!}" class="layui-input Non-Selectable" readonly>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">职务</label>
                                    <div class="layui-input-inline">
                                        <input type="hidden" name="jobNo" id="jobNo">
                                        <input type="text"   id="jobName"  value="${card.jobNo!}" class="layui-input Non-Selectable" readonly >
                                    </div>
                                </div>
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">年月</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  name="gzYm" id="gzYm" value="${card.gzYm!}"  class="layui-input Non-Selectable" readonly>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">上班打卡异常次数</label>
                                    <div class="layui-input-inline">
                                        <input type="text"   onchange="sumNum()"   onKeyUp="checkIsNum()" onafterpaste="this.value=this.value.replace(/\D/g,'')" name="upWorkAbnormityNo" id="upWorkAbnormityNo"  value="${card.upWorkAbnormityNo!}" class="layui-input"  >
                                    </div>
                                </div>
                                <div class="layui-inline ">
                                    <label class="layui-form-label chckNumclass" style="width: auto;">下班打卡异常次数</label>
                                    <div class="layui-input-inline">
                                        <input type="text" onchange="sumNum()"  onKeyUp="checkIsNum()" onafterpaste="this.value=this.value.replace(/\D/g,'')"  name="offWorkAbnormityNo" id="offWorkAbnormityNo" value="${card.offWorkAbnormityNo!}" class="layui-input chckNumclass"  >
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                            <div class="layui-inline ">
                                <label class="layui-form-label" style="width: auto;">抽查打卡异常次数</label>
                                <div class="layui-input-inline">
                                    <input type="text" onchange="sumNum()"  onKeyUp="checkIsNum()" onafterpaste="this.value=this.value.replace(/\D/g,'')" name="checkAbnormityNo" id="checkAbnormityNo" value="${card.checkAbnormityNo!}"   class="layui-input chckNumclass"  >
                                </div>
                            </div>
                            <div class="layui-inline ">
                                <label class="layui-form-label" style="width: auto;">旷工天数</label>
                                <div class="layui-input-inline">
                                    <input type="text"   onchange="checkIsNum()" onafterpaste="this.value=this.value.replace(/\D/g,'')" name="absenteeismNo" id="absenteeismNo"  value="${card.absenteeismNo!}" class="layui-input chckNumclass"  >
                                </div>
                            </div>
                        </div>
                            <div class="layui-form-item">
                                <div class="layui-inline ">
                                    <label class="layui-form-label" style="width: auto;">打卡异常总次数</label>
                                    <div class="layui-input-inline">
                                        <input type="text"  readonly name="abnormityTotalNo"  id="abnormityTotalNo" value="${card.abnormityTotalNo!}" class="layui-input Non-Selectable"  >
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<link rel="stylesheet" type="text/css" href="/ui/easyui-1.5.1/themes/insdep/easyui.css" >
<script type="text/javascript" src="${ctx}/ui/js/jquery.min.js"></script>
<script type="text/javascript" src="/ui/easyui-1.5.1/jquery.easyui-1.5.1.min.js"></script>
<script type="text/javascript" src="/ui/easyui-1.5.1/jquery.easyui-1.5.1.min.js"></script>
<script type="text/javascript" src="${ctx}/ui/js/plugins/layui/layui.js"></script>
<script type="text/javascript">
    var table;
    var form;
    layui.use(['table','form'],function () {
        table=layui.table;
        form = layui.form;
        form.render();
    });
    $('#empNo').combogrid({
        panelWidth: 600,
        panelHeight:250,
        delay: 500,
        mode: 'remote',
        /* 需修改为当前模块的url */
        url:'${ctx}/cf/cardAbnormity/queryEmp',
        idField: 'EMP_NO',
        textField: 'EMP_NO',
        method: 'POST',
        striped : true,
        columns: [[
            {field:'EMP_NO',title:'员工编号',width:100,sortable:true},
            {field:'EMP_NAME',title:'员工姓名',width:100,sortable:true},
            {field:'REGION_NAME',title:'大区',width:100,sortable:true},
            {field:'ORG_NAME',title:'分公司',width:100,sortable:true},
            {field:'BUSINESS_NAME',title:'营业部',width:80,sortable:true},
            {field:'TEAM_NAME',title:'团队',width:80,sortable:true},
            {field:'POSITION',title:'职位',width:130,sortable:true}
        ]],
        onSelect: function(index, row){
            $('#empNo').val(row.EMP_NO);
            $('#empName').val(row.EMP_NAME);
            $('#region').val(row.REGION_NAME);
            $('#filiale').val(row.ORG_NAME);
            $('#dept').val(row.BUSINESS_NAME);
            $('#team').val(row.TEAM_NAME);
            $('#jobName').val(row.POSITION);
            $('#jobNo').val(row.JOB_NO);
            $('#gzYm').val(row.GZ_YM);
            $('#deptCode').val(row.DEPT_CODE);
        }
    });

    function checkIsNum() {
        var re = /^[0-9]+$/ ;
        var res=/^\d+(\.\d{1,1})?$/;
        var a = $("#upWorkAbnormityNo").val();
        var b = a.substr(0,1);
        if(b=='0'&&a.length>1){
            layer.tips("开头不能为0",'#upWorkAbnormityNo', {
                tips: 2
            });
            $("#upWorkAbnormityNo").val("0");
            return;
        }
        if(!re.test(a)){
            layer.tips("必须为正整数",'#upWorkAbnormityNo', {
                tips: 2
            });
            $("#upWorkAbnormityNo").val("0");
            return;
        }
        if(a>31){
            layer.tips("上班打卡异常次数不能超过31天",'#upWorkAbnormityNo', {
                tips: 2
            });
            $("#upWorkAbnormityNo").val("0");
            return;
        }
        var c=$("#offWorkAbnormityNo").val();
        var d = c.substr(0,1);
        if(d=='0'&&c.length>1){
            layer.tips("开头不能为0",'#offWorkAbnormityNo', {
                tips: 2
            });
            $("#offWorkAbnormityNo").val("0");
            return;
        }
        if(!re.test(c)){
            layer.tips("必须为正整数",'#offWorkAbnormityNo', {
                tips: 2
            });
            $("#offWorkAbnormityNo").val("0");
            return;
        }
        if(c>31){
            layer.tips("下班打卡异常次数不能超过31天",'#offWorkAbnormityNo', {
                tips: 2
            });
            $("#offWorkAbnormityNo").val("0");
            return;
        }

        var e=$("#checkAbnormityNo").val();
        var f = e.substr(0,1);
        if(f=='0'&&e.length>1){
            layer.tips("开头不能为0",'#checkAbnormityNo', {
                tips: 2
            });
            $("#checkAbnormityNo").val("0");
            return;
        }
        if(!re.test(e)){
            layer.tips("必须为正整数",'#checkAbnormityNo', {
                tips: 2
            });
            $("#checkAbnormityNo").val("0");
            return;
        }
        if(e>31){
            layer.tips("抽查打卡异常次数不能超过31天",'#checkAbnormityNo', {
                tips: 2
            });
            $("#checkAbnormityNo").val("0");
            return;
        }


        var g=$("#absenteeismNo").val();
        var h = g.substr(0,2);
        if(h=='00'&&g.length>1){
            layer.tips("开头不能为0",'#absenteeismNo', {
                tips: 2
            });
            $("#absenteeismNo").val("0.0");
            return;
        }
        if(!res.test(g)){
            layer.tips("必须为精度为两位小数以内的正数",'#absenteeismNo', {
                tips: 2
            });
            $("#absenteeismNo").val("0.0");
            return;
        }
        if(g>31){
            layer.tips("旷工天数不能超过31天",'#absenteeismNo', {
                tips: 2
            });
            $("#absenteeismNo").val("0.0");
            return;
        }
    }

    function sumNum() {
        var a = $("#upWorkAbnormityNo").val();
        var b=$("#offWorkAbnormityNo").val();
        var c=$("#checkAbnormityNo").val();
        $("#abnormityTotalNo").val((a-0)+(b-0)+(c-0));
        form.render();
    }

    function validateAddCard() {
        var flag=true;
            var empNo = $("#empNo").val();
            if(empNo==''){
                validateAddTips('员工编码','，不能为空！');
                flag=false;
            }
        return flag;
    }
    
    function validateAddTips(filedName,msg){
        layer.msg("<font style='color: paleturquoise'>"+filedName+"</font>"+msg+"",{
            anim:6,
        });
    }
</script>

</html>
</@compress>
